# Stage Environment Configuration
# Triggered manually for pre-production validation
#
# Workspace host is set via:
#   - Environment variable: DATABRICKS_HOST
#   - Or GitHub secret in CI/CD pipeline

targets:
  stage:
    mode: production

    # Workspace configuration
    # Host is automatically read from DATABRICKS_HOST environment variable
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}

    # Stage-specific resource overrides
    resources:
      jobs:
        dq_rule_generation:
          tags:
            environment: "stage"
            cost_center: "pre-production"
        dq_rule_validation:
          tags:
            environment: "stage"
            cost_center: "pre-production"
