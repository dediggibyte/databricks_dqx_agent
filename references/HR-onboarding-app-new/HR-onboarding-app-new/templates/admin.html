{% extends "base.html" %}

{% block content %}
<div class="row mb-3">
    <div class="col">
        <h4>
            <i class="bi bi-speedometer2 me-2"></i>
            HR Admin Dashboard
        </h4>
        <p class="text-muted">View HR analytics, onboarding progress, and workforce insights.</p>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card shadow-sm">
            <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">
                    <i class="bi bi-bar-chart-line me-2"></i>
                    HRMS Analytics Dashboard
                </h5>
                <a href="{{ dashboard_url }}" target="_blank" class="btn btn-outline-light btn-sm">
                    <i class="bi bi-box-arrow-up-right me-1"></i>
                    Open in New Tab
                </a>
            </div>
            <div class="card-body p-0">
                {% if dashboard_url %}
                <div class="dashboard-container">
                    <iframe
                        src="{{ dashboard_url }}"
                        width="100%"
                        height="800"
                        frameborder="0"
                        allowfullscreen
                        style="border: none;">
                    </iframe>
                </div>
                {% else %}
                <div class="alert alert-warning m-4">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    <strong>Dashboard not configured.</strong>
                    <p class="mb-0 mt-2">
                        Set the <code>DATABRICKS_DASHBOARD_URL</code> environment variable to your 
                        embedded dashboard URL.
                    </p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
.dashboard-container {
    width: 100%;
    min-height: 800px;
    background: #1a1a2e;
}

.dashboard-container iframe {
    display: block;
    min-height: 800px;
}
</style>
{% endblock %}
